{"id":"heimdall-helm-07c","title":"Create data migration strategy: Standalone PostgreSQL StatefulSet → Bitnami subchart","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-30T12:02:25.13522-05:00","created_by":"alippold","updated_at":"2025-12-30T12:02:25.13522-05:00","dependencies":[{"issue_id":"heimdall-helm-07c","depends_on_id":"heimdall-helm-alv","type":"blocks","created_at":"2025-12-30T12:03:05.642679-05:00","created_by":"daemon"}]}
{"id":"heimdall-helm-07f","title":"Phase 7: CI/CD \u0026 Release - GitHub Actions, v1.0.0","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-30T11:39:30.651049-05:00","created_by":"alippold","updated_at":"2025-12-30T11:39:30.651049-05:00","dependencies":[{"issue_id":"heimdall-helm-07f","depends_on_id":"heimdall-helm-pp6","type":"blocks","created_at":"2025-12-30T11:56:36.392306-05:00","created_by":"daemon"}]}
{"id":"heimdall-helm-0he","title":"CRITICAL: Debug Issue #13 - StatefulSet PVC reconnection (already uses StatefulSet!)","status":"open","priority":0,"issue_type":"bug","created_at":"2025-12-30T12:02:08.415094-05:00","created_by":"alippold","updated_at":"2025-12-30T12:02:08.415094-05:00","dependencies":[{"issue_id":"heimdall-helm-0he","depends_on_id":"heimdall-helm-alv","type":"blocks","created_at":"2025-12-30T12:02:48.257816-05:00","created_by":"daemon"}]}
{"id":"heimdall-helm-2k8","title":"Phase 3: Health \u0026 HA - Probes, PDB, HPA","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-30T11:39:10.771934-05:00","created_by":"alippold","updated_at":"2025-12-30T11:39:10.771934-05:00","dependencies":[{"issue_id":"heimdall-helm-2k8","depends_on_id":"heimdall-helm-alv","type":"blocks","created_at":"2025-12-30T11:56:17.343494-05:00","created_by":"daemon"}]}
{"id":"heimdall-helm-6d3","title":"Fix GitHub Issue #33: CA certificate filename hardcoded to certs.pem","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-30T11:39:37.051581-05:00","created_by":"alippold","updated_at":"2025-12-30T11:39:37.051581-05:00","dependencies":[{"issue_id":"heimdall-helm-6d3","depends_on_id":"heimdall-helm-8yk","type":"blocks","created_at":"2025-12-30T11:57:14.311381-05:00","created_by":"daemon"}]}
{"id":"heimdall-helm-6w4","title":"Fix GitHub Issue #9: Add Helm tests","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-30T11:40:04.203201-05:00","created_by":"alippold","updated_at":"2025-12-30T11:40:04.203201-05:00","dependencies":[{"issue_id":"heimdall-helm-6w4","depends_on_id":"heimdall-helm-pp6","type":"blocks","created_at":"2025-12-30T11:57:25.022596-05:00","created_by":"daemon"}]}
{"id":"heimdall-helm-7ww","title":"Phase 5: OAuth/OIDC Fix - GitLab authentication debug","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-30T11:39:21.085562-05:00","created_by":"alippold","updated_at":"2025-12-30T11:39:21.085562-05:00","dependencies":[{"issue_id":"heimdall-helm-7ww","depends_on_id":"heimdall-helm-8yk","type":"blocks","created_at":"2025-12-30T11:56:26.42256-05:00","created_by":"daemon"}]}
{"id":"heimdall-helm-82b","title":"RECOVERY: Current Session Context","description":"Context from 2025-12-30 Session 2:\n\nCOMPLETED THIS SESSION:\n- ✅ Established proper dependency chain (24 tasks with sequential phases)\n- ✅ Added 8 critical tasks from Plan agent comprehensive review\n- ✅ Created .gitignore and .helmignore files (Helm best practices)\n- ✅ Renamed chart directory: heimdall2/ → heimdall/ (git mv, history preserved)\n- ✅ Updated all documentation references (README, CLAUDE.md, PROJECT-STATUS.md)\n- ✅ Committed and pushed all changes to develop branch\n\nCRITICAL FINDING - PERSISTENCE BUG DISCOVERED:\n- PostgreSQL StatefulSet uses STATIC PVC reference (line 86: claimName)\n- ❌ WRONG: Should use volumeClaimTemplates for StatefulSet\n- ❌ ROOT CAUSE of Issue #13 (PV doesn't reconnect on redeploy)\n- Heimdall StatefulSet uses emptyDir (ephemeral - data lost on restart)\n- User reported: \"persistence may be backward - DB vs App\"\n- Files: heimdall/templates/postgresql-statefulset.yaml (lines 82-89)\n         heimdall/templates/heimdall-statefulset.yaml (no persistent volumes)\n\nIN PROGRESS:\n- None - clean state, ready for Phase 0\n\nGIT STATUS:\n- Branch: develop\n- Remote: origin/develop (up to date)\n- Last commit: ffa1e49 (refactor: Rename chart directory)\n- Working tree: CLEAN ✅\n- All changes committed and pushed ✅\n\nBEADS STATUS:\n- Total tasks: 24 (7 phases + 8 GitHub issues + 9 critical gaps)\n- Ready to work: 1 (Phase 0: Pre-Migration Baseline Testing)\n- Proper dependency chain: Phase 0 → 1 → 2 → 3 → 4 → 5 → 6 → 7\n- Command: bd ready\n\nNEXT STEPS (Phase 0 - Baseline Testing):\n1. Deploy current chart to local Kubernetes cluster\n2. Test persistence behavior (verify PostgreSQL PVC bug)\n3. Test Heimdall data persistence (does app need storage?)\n4. Export baseline database backup\n5. Document current behavior before modernization\n6. Create upgrade path test plan\n\nCRITICAL TASKS ADDED THIS SESSION:\n1. heimdall-helm-dhm: Phase 0 baseline testing (blocks Phase 1)\n2. heimdall-helm-0he: Debug StatefulSet PVC reconnection (CRITICAL)\n3. heimdall-helm-v7y: Research Sequelize migrations (NOT Rails)\n4. heimdall-helm-qwd: Verify health probe endpoints exist\n5. heimdall-helm-07c: Data migration strategy (standalone → Bitnami)\n6. heimdall-helm-ydy: Evaluate Bitnami readme-generator\n7. heimdall-helm-9f1: Investigate Issue #24 (may be intentional)\n8. heimdall-helm-9bk: CRITICAL - Verify DB vs App persistence\n\nBLOCKERS/NOTES:\n- User has local Kubernetes clusters for testing (ready for Phase 0)\n- Beads commands must run ONE AT A TIME (CLI bug - never chain)\n- Helm v4.0.0 released Nov 2025 - Chart API v2 compatible\n- Plan agent review identified 7 critical gaps + 15 medium enhancements\n- SESSION-*.md files now gitignored (internal only)\n- Model: Sonnet 4.5 (recommended for multi-phase architectural work)\n\nKEY FILES MODIFIED THIS SESSION:\n- .gitignore (enhanced with secrets, session files)\n- heimdall/.helmignore (NEW - chart packaging)\n- heimdall/* (all 14 files renamed from heimdall2/)\n- CLAUDE.md (structure updated)\n- PROJECT-STATUS.md (rename marked complete)\n- README.md (chart paths updated)\n- .beads/issues.jsonl (24 tasks, proper dependencies)\n\nPLAN AGENT KEY FINDINGS:\n- Issue #13: StatefulSet already exists but uses wrong PVC pattern\n- Issue #24: Password encoding may be intentional (SOPS integration)\n- Health endpoints may not exist (need verification)\n- Sequelize != Rails (different migration commands)\n- values.schema.json complexity underestimated (95+ env vars)\n- No upgrade/rollback testing strategy yet\n- PostgreSQL migration to Bitnami needs data migration plan\n\nRECOVERY INSTRUCTIONS:\n1. Run: bd ready\n2. Review Phase 0 task: heimdall-helm-dhm\n3. Read heimdall/templates/postgresql-statefulset.yaml (lines 82-89)\n4. Deploy to local cluster and test current persistence behavior\n5. Start baseline testing before any modernization work","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-30T12:17:32.872247-05:00","created_by":"alippold","updated_at":"2025-12-30T12:17:32.872247-05:00"}
{"id":"heimdall-helm-8yk","title":"Phase 4: Security \u0026 Configuration - CA certs, NetworkPolicy","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-30T11:39:15.758792-05:00","created_by":"alippold","updated_at":"2025-12-30T11:39:15.758792-05:00","dependencies":[{"issue_id":"heimdall-helm-8yk","depends_on_id":"heimdall-helm-2k8","type":"blocks","created_at":"2025-12-30T11:56:22.007758-05:00","created_by":"daemon"}]}
{"id":"heimdall-helm-9bk","title":"CRITICAL: Verify persistence - DB vs App - User reports possible backward config","status":"open","priority":0,"issue_type":"bug","created_at":"2025-12-30T12:03:36.166509-05:00","created_by":"alippold","updated_at":"2025-12-30T12:03:36.166509-05:00","dependencies":[{"issue_id":"heimdall-helm-9bk","depends_on_id":"heimdall-helm-dhm","type":"blocks","created_at":"2025-12-30T12:03:41.002484-05:00","created_by":"daemon"}]}
{"id":"heimdall-helm-9f1","title":"Investigate Issue #24 - Database password b64enc may be intentional (SOPS/external secrets)","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-30T12:02:35.884148-05:00","created_by":"alippold","updated_at":"2025-12-30T12:02:35.884148-05:00","dependencies":[{"issue_id":"heimdall-helm-9f1","depends_on_id":"heimdall-helm-boh","type":"blocks","created_at":"2025-12-30T12:03:28.844716-05:00","created_by":"daemon"}]}
{"id":"heimdall-helm-ag8","title":"Fix GitHub Issue #29: Update init container to UBI 9","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-30T11:39:42.709089-05:00","created_by":"alippold","updated_at":"2025-12-30T11:39:42.709089-05:00","dependencies":[{"issue_id":"heimdall-helm-ag8","depends_on_id":"heimdall-helm-alv","type":"blocks","created_at":"2025-12-30T11:57:09.225231-05:00","created_by":"daemon"}]}
{"id":"heimdall-helm-alv","title":"Phase 2: Database \u0026 Persistence - Bitnami PostgreSQL, migrations","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-30T11:39:05.384024-05:00","created_by":"alippold","updated_at":"2025-12-30T11:39:05.384024-05:00","dependencies":[{"issue_id":"heimdall-helm-alv","depends_on_id":"heimdall-helm-boh","type":"blocks","created_at":"2025-12-30T11:56:12.447243-05:00","created_by":"daemon"}]}
{"id":"heimdall-helm-boh","title":"Phase 1: Foundation - Chart structure, helpers, secrets","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-30T11:35:11.802431-05:00","created_by":"alippold","updated_at":"2025-12-30T11:35:11.802431-05:00","dependencies":[{"issue_id":"heimdall-helm-boh","depends_on_id":"heimdall-helm-dhm","type":"blocks","created_at":"2025-12-30T12:02:42.617725-05:00","created_by":"daemon"}]}
{"id":"heimdall-helm-dhm","title":"Phase 0: Pre-Migration Baseline Testing - Deploy v3.3.3, export data, document behavior","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-30T12:02:03.069413-05:00","created_by":"alippold","updated_at":"2025-12-30T12:02:03.069413-05:00"}
{"id":"heimdall-helm-ey2","title":"Fix GitHub Issue #13: Allow reconnection to old PVs","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-30T11:39:59.043151-05:00","created_by":"alippold","updated_at":"2025-12-30T11:39:59.043151-05:00","dependencies":[{"issue_id":"heimdall-helm-ey2","depends_on_id":"heimdall-helm-alv","type":"blocks","created_at":"2025-12-30T11:57:03.53626-05:00","created_by":"daemon"}]}
{"id":"heimdall-helm-j4j","title":"RECOVERY: Current Session Context","description":"Context from 2025-12-30:\n\nCOMPLETED THIS SESSION:\n- Repository renamed: heimdall2-helm → heimdall-helm\n- Beads initialized with 15 tasks (7 phase epics + 8 GitHub issue tasks)\n- GitFlow develop branch created and pushed\n- Created comprehensive documentation:\n  * CLAUDE.md - Complete development guide\n  * HEIMDALL-MIGRATION-PLAN.md - Detailed modernization roadmap\n  * ISSUES-ANALYSIS.md - Best practices assessment vs all 8 GitHub issues\n  * PROJECT-STATUS.md - Current state summary\n  * SESSION-001.md - Session notes\n  * HELM-V4-NOTES.md - Helm v4 compatibility guide\n- All issues analyzed against official Helm best practices\n- Updated for Helm v4.0.0 compatibility (released Nov 2025)\n\nIN PROGRESS:\n- None - setup phase complete, ready to begin Phase 1\n\nGIT STATUS:\n- Branch: develop\n- Remote: origin/develop (pushed)\n- All documentation changes uncommitted\n- Working tree: New files created, not yet committed\n\nNEXT STEPS:\n1. Review bd ready to see all available tasks\n2. Start Phase 1 (heimdall-helm-boh): Foundation work\n   - Rename heimdall2/ → heimdall/ directory\n   - Create values.schema.json\n   - Enhance _helpers.tpl with database helpers\n   - Implement three secrets approaches\n3. Fix GitHub issues mapped to Phase 1:\n   - #22 (values.schema.json)\n   - #24 (stringData consistency)\n   - #6 (duplicate host)\n\nBLOCKERS/NOTES:\n- CRITICAL: Beads commands must run ONE AT A TIME (bug in beads CLI)\n- Helm v4.0.0 is released - we're targeting Chart API v2 (compatible with v3 \u0026 v4)\n- All Vulcan chart patterns documented in vulcan-helm/CLAUDE.md\n- GitLab OAuth bug needs investigation in Phase 5\n- Issue #13 (PV reconnection) is critical - data loss risk\n\nKEY REFERENCE FILES:\n- CLAUDE.md - Read this first for complete development workflow\n- HEIMDALL-MIGRATION-PLAN.md - Detailed phase-by-phase plan\n- PROJECT-STATUS.md - Quick status overview\n- vulcan-helm/CLAUDE.md - Pattern reference (Vulcan chart)","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-30T11:46:31.095813-05:00","created_by":"alippold","updated_at":"2025-12-30T11:52:17.144453-05:00","closed_at":"2025-12-30T11:52:17.144453-05:00","close_reason":"Recovery successful, context fully restored"}
{"id":"heimdall-helm-o1m","title":"Fix GitHub Issue #22: Create values.schema.json validation","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-30T11:39:53.733202-05:00","created_by":"alippold","updated_at":"2025-12-30T11:39:53.733202-05:00","dependencies":[{"issue_id":"heimdall-helm-o1m","depends_on_id":"heimdall-helm-boh","type":"blocks","created_at":"2025-12-30T11:56:47.760962-05:00","created_by":"daemon"}]}
{"id":"heimdall-helm-pow","title":"Fix GitHub Issue #24: Move database password to stringData section","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-30T11:39:48.381033-05:00","created_by":"alippold","updated_at":"2025-12-30T11:39:48.381033-05:00","dependencies":[{"issue_id":"heimdall-helm-pow","depends_on_id":"heimdall-helm-boh","type":"blocks","created_at":"2025-12-30T11:56:52.934649-05:00","created_by":"daemon"}]}
{"id":"heimdall-helm-pp6","title":"Phase 6: Documentation \u0026 Testing - Nuxt docs, Helm tests","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-30T11:39:25.790653-05:00","created_by":"alippold","updated_at":"2025-12-30T11:39:25.790653-05:00","dependencies":[{"issue_id":"heimdall-helm-pp6","depends_on_id":"heimdall-helm-7ww","type":"blocks","created_at":"2025-12-30T11:56:31.252693-05:00","created_by":"daemon"}]}
{"id":"heimdall-helm-qwd","title":"Verify Heimdall health probe endpoints exist (/api/v1/health, /api/v1/ping, etc.)","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-30T12:02:19.160772-05:00","created_by":"alippold","updated_at":"2025-12-30T12:02:19.160772-05:00","dependencies":[{"issue_id":"heimdall-helm-qwd","depends_on_id":"heimdall-helm-2k8","type":"blocks","created_at":"2025-12-30T12:03:11.590843-05:00","created_by":"daemon"}]}
{"id":"heimdall-helm-v7y","title":"Research Heimdall Sequelize migration commands (NOT Rails - different syntax)","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-30T12:02:13.698767-05:00","created_by":"alippold","updated_at":"2025-12-30T12:02:13.698767-05:00","dependencies":[{"issue_id":"heimdall-helm-v7y","depends_on_id":"heimdall-helm-alv","type":"blocks","created_at":"2025-12-30T12:02:53.631796-05:00","created_by":"daemon"}]}
{"id":"heimdall-helm-wyl","title":"Fix GitHub Issue #6: Remove duplicate host configuration in ingress","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-30T11:40:15.359734-05:00","created_by":"alippold","updated_at":"2025-12-30T11:40:15.359734-05:00","dependencies":[{"issue_id":"heimdall-helm-wyl","depends_on_id":"heimdall-helm-boh","type":"blocks","created_at":"2025-12-30T11:56:58.121367-05:00","created_by":"daemon"}]}
{"id":"heimdall-helm-ydy","title":"Evaluate Bitnami readme-generator-for-helm for automated README.md","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-30T12:02:30.626112-05:00","created_by":"alippold","updated_at":"2025-12-30T12:02:30.626112-05:00","dependencies":[{"issue_id":"heimdall-helm-ydy","depends_on_id":"heimdall-helm-pp6","type":"blocks","created_at":"2025-12-30T12:03:19.987955-05:00","created_by":"daemon"}]}
{"id":"heimdall-helm-z1m","title":"Fix GitHub Issue #8: Update documentation","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-30T11:40:09.559065-05:00","created_by":"alippold","updated_at":"2025-12-30T11:40:09.559065-05:00","dependencies":[{"issue_id":"heimdall-helm-z1m","depends_on_id":"heimdall-helm-pp6","type":"blocks","created_at":"2025-12-30T11:57:20.00372-05:00","created_by":"daemon"}]}
