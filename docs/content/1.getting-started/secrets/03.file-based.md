---
title: File-based Secrets (Development)
description: Load secrets from gitignored files for local development
navigation:
  icon: i-lucide-file-key
---

::note{title="Default for Local Development"}
This is the **default approach** for local development and testing. Secrets are loaded from gitignored files.
::

## Configuration

```yaml
heimdall:
  secretsFiles: ["env/heimdall-secrets.yaml"]
```

## Generate Secrets

Use the provided script:

```bash
./generate-heimdall-secrets.sh
```

This creates `heimdall/env/heimdall-secrets.yaml` with:

```yaml
JWT_SECRET: "randomly-generated-128-chars"
API_KEY_SECRET: "randomly-generated-66-chars"
DATABASE_PASSWORD: "randomly-generated-66-chars"
ADMIN_PASSWORD: "Admin_randomly-generated"
```

::warning{title="Automatic Security"}
The secrets file is automatically:
- Added to `.gitignore` (never committed)
- Created with `0600` permissions (owner read/write only)
::

## Manual Secret File Creation

If you prefer not to use the generation script:

```yaml
# heimdall/env/heimdall-secrets.yaml
JWT_SECRET: "your-128-character-secret-here"
API_KEY_SECRET: "your-66-character-secret-here"
DATABASE_PASSWORD: "your-database-password"
ADMIN_PASSWORD: "your-admin-password"
```

Set restrictive permissions:
```bash
chmod 600 heimdall/env/heimdall-secrets.yaml
```

## Gitignore Configuration

The repository includes proper gitignore patterns:

```gitignore
# Secrets files (NEVER commit these)
heimdall/env/heimdall-secrets.yaml
heimdall2/env/heimdall-secrets.yaml

# Template files ARE committed (safe - no secrets)
# heimdall/templates/heimdall-secrets.yaml
```

::caution{title="Never Commit Secrets"}
Always verify that `heimdall/env/heimdall-secrets.yaml` is gitignored before committing.
::

## How It Works

The Helm chart reads the file during template rendering:

```yaml
{{- if .Values.heimdall.secretsFiles }}
  {{- range $path := .Values.heimdall.secretsFiles }}
    {{- $fileContent := $.Files.Get $path }}
    {{- $secrets := $fileContent | fromYaml }}
    {{- range $key, $val := $secrets }}
  {{ $key }}: {{ $val | quote }}
    {{- end }}
  {{- end }}
{{- end }}
```

## File Permissions

Ensure restrictive permissions:

```bash
# Set read/write for owner only
chmod 600 heimdall/env/heimdall-secrets.yaml

# Verify permissions
ls -la heimdall/env/heimdall-secrets.yaml
# Should show: -rw------- (600)
```

## See Also

- [Secrets Overview](/helm-chart/getting-started/secrets/overview) - Choose the right approach
- [Existing Secret](/helm-chart/getting-started/secrets/existing-secret) - Production approach
- [Inline Secrets](/helm-chart/getting-started/secrets/inline) - CI/CD approach
