---
title: Common Scenarios
description: Copy-paste configurations for common deployment scenarios
navigation:
  icon: i-lucide-copy
---

Ready-to-use configurations for the most common Heimdall deployments.

## GitHub OAuth

Enable GitHub authentication for your users.

### 1. Create GitHub OAuth App

1. Go to GitHub Settings → Developer settings → OAuth Apps
2. Click "New OAuth App"
3. Set:
   - Application name: `Heimdall`
   - Homepage URL: `https://heimdall.example.com`
   - Authorization callback URL: `https://heimdall.example.com/auth/github/callback`
4. Save and copy Client ID and Client Secret

### 2. Create Secret with GitHub Credentials

```bash
kubectl create secret generic heimdall-production-secrets \
  --namespace heimdall \
  --from-literal=JWT_SECRET="$(openssl rand -hex 64)" \
  --from-literal=API_KEY_SECRET="$(openssl rand -hex 33)" \
  --from-literal=DATABASE_PASSWORD="$(openssl rand -hex 33)" \
  --from-literal=ADMIN_PASSWORD="SecurePassword123!" \
  --from-literal=OAUTH_GITHUB_CLIENT_SECRET="your-github-client-secret"
```

### 3. Deploy with GitHub OAuth

```yaml
# heimdall-github.yaml
heimdall:
  existingSecret: "heimdall-production-secrets"

  config:
    OAUTH_GITHUB_ENABLED: "true"
    OAUTH_GITHUB_CLIENT_ID: "your-github-client-id"

  ingress:
    enabled: true
    className: "traefik"
    annotations:
      cert-manager.io/cluster-issuer: "letsencrypt-prod"
    hosts:
      - host: heimdall.example.com
        paths:
          - path: /
    tls:
      - secretName: heimdall-tls
        hosts:
          - heimdall.example.com
```

```bash
helm install heimdall mitre/heimdall \
  --namespace heimdall \
  --create-namespace \
  --values heimdall-github.yaml \
  --wait
```

Access https://heimdall.example.com and click "Sign in with GitHub"

---

## GitLab OAuth

Enable GitLab authentication (works with GitLab.com or self-hosted).

### 1. Create GitLab OAuth Application

1. Go to GitLab Settings → Applications
2. Set:
   - Name: `Heimdall`
   - Redirect URI: `https://heimdall.example.com/auth/gitlab/callback`
   - Scopes: `read_user`, `openid`
3. Save and copy Application ID and Secret

### 2. Create Secret with GitLab Credentials

```bash
kubectl create secret generic heimdall-production-secrets \
  --namespace heimdall \
  --from-literal=JWT_SECRET="$(openssl rand -hex 64)" \
  --from-literal=API_KEY_SECRET="$(openssl rand -hex 33)" \
  --from-literal=DATABASE_PASSWORD="$(openssl rand -hex 33)" \
  --from-literal=ADMIN_PASSWORD="SecurePassword123!" \
  --from-literal=OAUTH_GITLAB_CLIENT_SECRET="your-gitlab-secret"
```

### 3. Deploy with GitLab OAuth

```yaml
# heimdall-gitlab.yaml
heimdall:
  existingSecret: "heimdall-production-secrets"

  config:
    OAUTH_GITLAB_ENABLED: "true"
    OAUTH_GITLAB_CLIENT_ID: "your-gitlab-application-id"
    OAUTH_GITLAB_URL: "https://gitlab.com"  # Or your GitLab instance URL

  ingress:
    enabled: true
    className: "traefik"
    annotations:
      cert-manager.io/cluster-issuer: "letsencrypt-prod"
    hosts:
      - host: heimdall.example.com
        paths:
          - path: /
    tls:
      - secretName: heimdall-tls
        hosts:
          - heimdall.example.com
```

```bash
helm install heimdall mitre/heimdall \
  --namespace heimdall \
  --create-namespace \
  --values heimdall-gitlab.yaml \
  --wait
```

---

## Okta OIDC

Enable Okta authentication with OpenID Connect.

### 1. Create Okta Application

1. Okta Admin Console → Applications → Create App Integration
2. Select "OIDC - OpenID Connect"
3. Select "Web Application"
4. Set:
   - App integration name: `Heimdall`
   - Sign-in redirect URIs: `https://heimdall.example.com/auth/oidc/callback`
   - Sign-out redirect URIs: `https://heimdall.example.com`
   - Controlled access: Select appropriate group
5. Save and copy Client ID and Client Secret

### 2. Create Secret with Okta Credentials

```bash
kubectl create secret generic heimdall-production-secrets \
  --namespace heimdall \
  --from-literal=JWT_SECRET="$(openssl rand -hex 64)" \
  --from-literal=API_KEY_SECRET="$(openssl rand -hex 33)" \
  --from-literal=DATABASE_PASSWORD="$(openssl rand -hex 33)" \
  --from-literal=ADMIN_PASSWORD="SecurePassword123!" \
  --from-literal=OIDC_CLIENT_SECRET="your-okta-client-secret"
```

### 3. Deploy with Okta OIDC

```yaml
# heimdall-okta.yaml
heimdall:
  existingSecret: "heimdall-production-secrets"

  config:
    OIDC_NAME: "Okta"
    OIDC_ISSUER: "https://your-org.okta.com"
    OIDC_AUTHORIZATION_URL: "https://your-org.okta.com/oauth2/v1/authorize"
    OIDC_TOKEN_URL: "https://your-org.okta.com/oauth2/v1/token"
    OIDC_USER_INFO_URL: "https://your-org.okta.com/oauth2/v1/userinfo"
    OIDC_CLIENT_ID: "your-okta-client-id"

  ingress:
    enabled: true
    className: "traefik"
    annotations:
      cert-manager.io/cluster-issuer: "letsencrypt-prod"
    hosts:
      - host: heimdall.example.com
        paths:
          - path: /
    tls:
      - secretName: heimdall-tls
        hosts:
          - heimdall.example.com
```

```bash
helm install heimdall mitre/heimdall \
  --namespace heimdall \
  --create-namespace \
  --values heimdall-okta.yaml \
  --wait
```

---

## AWS EKS with ALB

Deploy Heimdall on AWS EKS with Application Load Balancer.

### 1. Prerequisites

- AWS Load Balancer Controller installed
- ACM certificate created

### 2. Deploy Configuration

```yaml
# heimdall-eks.yaml
heimdall:
  existingSecret: "heimdall-production-secrets"

  # GitHub OAuth (optional)
  config:
    OAUTH_GITHUB_ENABLED: "true"
    OAUTH_GITHUB_CLIENT_ID: "your-github-client-id"

  # ALB Ingress
  ingress:
    enabled: true
    className: "alb"
    annotations:
      alb.ingress.kubernetes.io/scheme: internet-facing
      alb.ingress.kubernetes.io/target-type: ip
      alb.ingress.kubernetes.io/certificate-arn: "arn:aws:acm:us-east-1:123456789012:certificate/abc-123"
      alb.ingress.kubernetes.io/listen-ports: '[{"HTTP": 80}, {"HTTPS": 443}]'
      alb.ingress.kubernetes.io/ssl-redirect: '443'
    hosts:
      - host: heimdall.example.com
        paths:
          - path: /
            pathType: Prefix

  # ServiceAccount with IRSA for AWS access (optional)
  serviceAccount:
    create: true
    annotations:
      eks.amazonaws.com/role-arn: "arn:aws:iam::123456789012:role/heimdall-role"

# External RDS PostgreSQL
postgresql:
  enabled: false

externalDatabase:
  host: "heimdall-db.abc123.us-east-1.rds.amazonaws.com"
  port: 5432
  database: "heimdall_production"
  username: "heimdall"
```

```bash
helm install heimdall mitre/heimdall \
  --namespace heimdall \
  --create-namespace \
  --values heimdall-eks.yaml \
  --wait
```

---

## GCP GKE with Google OAuth

Deploy on GKE with Google OAuth authentication.

### 1. Create Google OAuth Credentials

1. Google Cloud Console → APIs & Services → Credentials
2. Create OAuth 2.0 Client ID
3. Application type: Web application
4. Authorized redirect URIs: `https://heimdall.example.com/auth/google/callback`

### 2. Deploy Configuration

```yaml
# heimdall-gke.yaml
heimdall:
  existingSecret: "heimdall-production-secrets"

  config:
    OAUTH_GOOGLE_ENABLED: "true"
    OAUTH_GOOGLE_CLIENT_ID: "your-google-client-id.apps.googleusercontent.com"

  ingress:
    enabled: true
    className: "gce"
    annotations:
      kubernetes.io/ingress.global-static-ip-name: "heimdall-ip"
      networking.gke.io/managed-certificates: "heimdall-cert"
    hosts:
      - host: heimdall.example.com
        paths:
          - path: /
            pathType: Prefix

  # ServiceAccount with Workload Identity
  serviceAccount:
    create: true
    annotations:
      iam.gke.io/gcp-service-account: "heimdall@your-project.iam.gserviceaccount.com"

# External Cloud SQL
postgresql:
  enabled: false

externalDatabase:
  host: "10.1.2.3"  # Cloud SQL private IP
  port: 5432
  database: "heimdall"
  username: "heimdall"
```

Create managed certificate:
```yaml
# managed-cert.yaml
apiVersion: networking.gke.io/v1
kind: ManagedCertificate
metadata:
  name: heimdall-cert
  namespace: heimdall
spec:
  domains:
    - heimdall.example.com
```

```bash
kubectl apply -f managed-cert.yaml

helm install heimdall mitre/heimdall \
  --namespace heimdall \
  --create-namespace \
  --values heimdall-gke.yaml \
  --wait
```

---

## Local Development (kind/minikube)

Quick local setup for development and testing.

```yaml
# heimdall-local.yaml
heimdall:
  # Generate secrets with script
  secretsFiles: ["heimdall-secrets.yaml"]

  # Single replica for development
  replicaCount: 1

  # Disable HA features
  podDisruptionBudget:
    enabled: false

  autoscaling:
    enabled: false

  # No ingress - use port-forward
  ingress:
    enabled: false

# Small PostgreSQL for development
postgresql:
  enabled: true
  auth:
    database: heimdall_dev
    username: postgres
  primary:
    persistence:
      size: 5Gi
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
```

```bash
# Generate secrets
./generate-heimdall-secrets.sh

# Install
helm install heimdall ./heimdall \
  --namespace heimdall \
  --create-namespace \
  --values heimdall-local.yaml \
  --wait

# Access
kubectl port-forward -n heimdall svc/heimdall 3000:3000
```

---

## See Also

- [Authentication Guide](/configuration/authentication) - All auth methods detailed
- [Ingress Configuration](/configuration/ingress) - Controller-specific guides
- [TLS/SSL Setup](/configuration/tls) - HTTPS configuration
