---
title: Authentication
description: Configure authentication providers for Heimdall
navigation:
  icon: i-lucide-shield-check
---

Heimdall supports multiple authentication methods for user login.

## Authentication Methods

| Method | Best For | Complexity |
|--------|----------|------------|
| **Local** | Development, small teams | Low |
| **GitHub OAuth** | GitHub-centric teams | Low |
| **GitLab OAuth** | GitLab users | Low |
| **Google OAuth** | Google Workspace teams | Low |
| **Okta OIDC** | Enterprise SSO | Medium |
| **LDAP** | Active Directory integration | Medium-High |

## Local Authentication

Default authentication with email/password.

**Configuration:**
```yaml
heimdall:
  config:
    # Local auth is enabled by default
    LOCAL_LOGIN_DISABLED: "false"
```

**Admin User:**
Created automatically on first deployment using `ADMIN_PASSWORD` from secrets.

**Create Additional Users:**
Via Heimdall web UI → Admin → Users → Create User

---

## GitHub OAuth

### Prerequisites

- GitHub OAuth App created
- Client ID and Client Secret

### Configuration

```yaml
heimdall:
  config:
    OAUTH_GITHUB_ENABLED: "true"
    OAUTH_GITHUB_CLIENT_ID: "your-github-client-id"

  # Add client secret to existing secret
```

**Secret:**
```bash
kubectl create secret generic heimdall-production-secrets \
  --from-literal=OAUTH_GITHUB_CLIENT_SECRET="your-github-client-secret" \
  --dry-run=client -o yaml | kubectl apply -f -
```

**Callback URL:**
```
https://heimdall.example.com/auth/github/callback
```

### Organization Restriction

Limit to specific GitHub organization:

```yaml
heimdall:
  config:
    OAUTH_GITHUB_ENABLED: "true"
    OAUTH_GITHUB_CLIENT_ID: "your-github-client-id"
    OAUTH_GITHUB_ORGANIZATION: "your-org-name"  # Optional
```

---

## GitLab OAuth

### Prerequisites

- GitLab OAuth Application created
- Application ID and Secret

### Configuration

```yaml
heimdall:
  config:
    OAUTH_GITLAB_ENABLED: "true"
    OAUTH_GITLAB_CLIENT_ID: "your-gitlab-application-id"
    OAUTH_GITLAB_URL: "https://gitlab.com"  # Or self-hosted GitLab URL
```

**Secret:**
```bash
kubectl create secret generic heimdall-production-secrets \
  --from-literal=OAUTH_GITLAB_CLIENT_SECRET="your-gitlab-secret" \
  --dry-run=client -o yaml | kubectl apply -f -
```

**Callback URL:**
```
https://heimdall.example.com/auth/gitlab/callback
```

### Self-Hosted GitLab

```yaml
heimdall:
  config:
    OAUTH_GITLAB_ENABLED: "true"
    OAUTH_GITLAB_CLIENT_ID: "your-application-id"
    OAUTH_GITLAB_URL: "https://gitlab.internal.company.com"
```

---

## Google OAuth

### Prerequisites

- Google Cloud OAuth 2.0 Client ID created
- Client ID and Client Secret

### Configuration

```yaml
heimdall:
  config:
    OAUTH_GOOGLE_ENABLED: "true"
    OAUTH_GOOGLE_CLIENT_ID: "your-client-id.apps.googleusercontent.com"
```

**Secret:**
```bash
kubectl create secret generic heimdall-production-secrets \
  --from-literal=OAUTH_GOOGLE_CLIENT_SECRET="your-google-client-secret" \
  --dry-run=client -o yaml | kubectl apply -f -
```

**Callback URL:**
```
https://heimdall.example.com/auth/google/callback
```

### Domain Restriction

Limit to Google Workspace domain:

```yaml
heimdall:
  config:
    OAUTH_GOOGLE_ENABLED: "true"
    OAUTH_GOOGLE_CLIENT_ID: "your-client-id.apps.googleusercontent.com"
    OAUTH_GOOGLE_HD: "example.com"  # Hosted domain restriction
```

---

## Okta OIDC

### Prerequisites

- Okta application created
- Client ID and Client Secret
- Okta domain URL

### Configuration

```yaml
heimdall:
  config:
    OIDC_NAME: "Okta"
    OIDC_ISSUER: "https://your-org.okta.com"
    OIDC_AUTHORIZATION_URL: "https://your-org.okta.com/oauth2/v1/authorize"
    OIDC_TOKEN_URL: "https://your-org.okta.com/oauth2/v1/token"
    OIDC_USER_INFO_URL: "https://your-org.okta.com/oauth2/v1/userinfo"
    OIDC_CLIENT_ID: "your-okta-client-id"
```

**Secret:**
```bash
kubectl create secret generic heimdall-production-secrets \
  --from-literal=OIDC_CLIENT_SECRET="your-okta-client-secret" \
  --dry-run=client -o yaml | kubectl apply -f -
```

**Callback URL:**
```
https://heimdall.example.com/auth/oidc/callback
```

---

## Generic OIDC

Any OpenID Connect-compliant provider.

### Configuration

```yaml
heimdall:
  config:
    OIDC_NAME: "My SSO Provider"
    OIDC_ISSUER: "https://sso.example.com"
    OIDC_AUTHORIZATION_URL: "https://sso.example.com/oauth2/authorize"
    OIDC_TOKEN_URL: "https://sso.example.com/oauth2/token"
    OIDC_USER_INFO_URL: "https://sso.example.com/oauth2/userinfo"
    OIDC_CLIENT_ID: "heimdall"
```

**Secret:**
```bash
kubectl create secret generic heimdall-production-secrets \
  --from-literal=OIDC_CLIENT_SECRET="your-oidc-client-secret" \
  --dry-run=client -o yaml | kubectl apply -f -
```

---

## LDAP

Integrate with Active Directory or OpenLDAP.

### Configuration

```yaml
heimdall:
  config:
    LDAP_ENABLED: "true"
    LDAP_HOST: "ldap.example.com"
    LDAP_PORT: "636"  # 636 for LDAPS, 389 for LDAP
    LDAP_BINDDN: "cn=admin,dc=example,dc=com"
    LDAP_SEARCHBASE: "ou=users,dc=example,dc=com"
    LDAP_SEARCHFILTER: "(uid={{username}})"
```

**Secret:**
```bash
kubectl create secret generic heimdall-production-secrets \
  --from-literal=LDAP_PASSWORD="your-ldap-bind-password" \
  --dry-run=client -o yaml | kubectl apply -f -
```

### Active Directory

```yaml
heimdall:
  config:
    LDAP_ENABLED: "true"
    LDAP_HOST: "ad.example.com"
    LDAP_PORT: "636"
    LDAP_BINDDN: "CN=Heimdall Service,OU=Service Accounts,DC=example,DC=com"
    LDAP_SEARCHBASE: "OU=Users,DC=example,DC=com"
    LDAP_SEARCHFILTER: "(sAMAccountName={{username}})"
```

### Custom CA Certificate

If LDAP server uses custom CA:

```yaml
heimdall:
  config:
    LDAP_ENABLED: "true"
    LDAP_HOST: "ldap.internal.company.com"
    LDAP_PORT: "636"

# Enable custom CA certificates
certs:
  enabled: true
  caCerts: |
    -----BEGIN CERTIFICATE-----
    ... your CA certificate ...
    -----END CERTIFICATE-----
```

See [Custom CA Certificates](/configuration/custom-ca-certificates) for details.

---

## Multiple Authentication Methods

Enable multiple providers simultaneously:

```yaml
heimdall:
  config:
    # Local auth
    LOCAL_LOGIN_DISABLED: "false"

    # GitHub OAuth
    OAUTH_GITHUB_ENABLED: "true"
    OAUTH_GITHUB_CLIENT_ID: "github-client-id"

    # GitLab OAuth
    OAUTH_GITLAB_ENABLED: "true"
    OAUTH_GITLAB_CLIENT_ID: "gitlab-client-id"
    OAUTH_GITLAB_URL: "https://gitlab.com"

    # Okta OIDC
    OIDC_NAME: "Okta"
    OIDC_ISSUER: "https://your-org.okta.com"
    OIDC_CLIENT_ID: "okta-client-id"
```

Users will see all enabled login options on the login page.

---

## Disable Local Authentication

For SSO-only deployments:

```yaml
heimdall:
  config:
    LOCAL_LOGIN_DISABLED: "true"

    # At least one OAuth/OIDC provider must be enabled
    OAUTH_GITHUB_ENABLED: "true"
    OAUTH_GITHUB_CLIENT_ID: "your-github-client-id"
```

::warning{title="Ensure SSO is Working First"}
Test SSO authentication before disabling local login to avoid lockout.
::

---

## Troubleshooting

### OAuth Redirect URL Mismatch

**Error:** `redirect_uri_mismatch`

**Cause:** Callback URL in OAuth provider doesn't match

**Fix:** Ensure callback URL exactly matches:
```
https://heimdall.example.com/auth/{provider}/callback
```

Replace `{provider}` with: `github`, `gitlab`, `google`, `oidc`

### LDAP Connection Timeout

**Error:** `LDAP connection timeout`

**Cause:** Network connectivity or firewall blocking LDAP port

**Fix:**
```bash
# Test LDAP connectivity from pod
kubectl exec -n heimdall heimdall-0 -- nc -zv ldap.example.com 636
```

### OIDC Discovery Failed

**Error:** `Failed to discover OIDC configuration`

**Cause:** OIDC issuer URL incorrect or `.well-known/openid-configuration` not accessible

**Fix:** Verify issuer URL returns OIDC discovery document:
```bash
curl https://your-org.okta.com/.well-known/openid-configuration
```

### Custom CA Not Trusted

**Error:** `SSL certificate problem: unable to get local issuer certificate`

**Cause:** Custom CA certificate not configured

**Fix:** Add custom CA certificate - see [Custom CA Certificates](/configuration/custom-ca-certificates)

---

## See Also

- [Common Scenarios](/getting-started/common-scenarios) - Copy-paste configs
- [Environment Variables](/configuration/environment-variables) - All config options
- [Custom CA Certificates](/configuration/custom-ca-certificates) - Trust internal CAs
- [Secrets Management](/getting-started/secrets) - Secure credential storage
