---
title: Authentication
description: Configure authentication providers for Heimdall
navigation:
  icon: i-lucide-shield-check
---

Heimdall supports multiple authentication methods for user login.

## Authentication Methods

| Method | Best For | Complexity |
|--------|----------|------------|
| **Local** | Development, small teams | Low |
| **GitHub OAuth** | GitHub-centric teams | Low |
| **GitLab OAuth** | GitLab users | Low |
| **Google OAuth** | Google Workspace teams | Low |
| **Okta OIDC** | Enterprise SSO | Medium |
| **LDAP** | Active Directory integration | Medium-High |

## Local Authentication

Default authentication with email/password.

**Configuration:**
```yaml
heimdall:
  config:
    # Local auth is enabled by default
    LOCAL_LOGIN_DISABLED: "false"
```

**Admin User:**
Created automatically on first deployment using `ADMIN_PASSWORD` from secrets.

**Create Additional Users:**
Via Heimdall web UI → Admin → Users → Create User

---

## GitHub OAuth

### Prerequisites

- GitHub OAuth App created
- Client ID and Client Secret

### Configuration

```yaml
heimdall:
  config:
    GITHUB_CLIENTID: "your-github-client-id"

  secrets:
    GITHUB_CLIENTSECRET: "your-github-client-secret"
```

**Callback URL:**
```
https://heimdall.example.com/authn/github/callback
```

::tip{title="OAuth Button Visibility"}
The GitHub login button appears when `GITHUB_CLIENTID` is set. Using `GITHUB_CLIENTID` (with underscore) will prevent the button from appearing.
::

---

## GitLab OAuth

### Prerequisites

- GitLab OAuth Application created
- Application ID and Secret

### Configuration

```yaml
heimdall:
  config:
    GITLAB_CLIENTID: "your-gitlab-application-id"
    GITLAB_BASEURL: "https://gitlab.com"  # Or self-hosted GitLab URL

  secrets:
    GITLAB_SECRET: "your-gitlab-secret"
```

**Callback URL:**
```
https://heimdall.example.com/authn/gitlab/callback
```

::warning{title="Heimdall Naming Inconsistency"}
GitLab uses `GITLAB_SECRET` (not `GITLAB_SECRET` like other providers). This is a known inconsistency in Heimdall.
::

### Self-Hosted GitLab

```yaml
heimdall:
  config:
    GITLAB_CLIENTID: "your-application-id"
    GITLAB_BASEURL: "https://gitlab.internal.company.com"

  secrets:
    GITLAB_SECRET: "your-gitlab-secret"
```

---

## Google OAuth

### Prerequisites

- Google Cloud OAuth 2.0 Client ID created
- Client ID and Client Secret

### Configuration

```yaml
heimdall:
  config:
    GOOGLE_CLIENTID: "your-client-id.apps.googleusercontent.com"

  secrets:
    GOOGLE_CLIENTSECRET: "your-google-client-secret"
```

**Callback URL:**
```
https://heimdall.example.com/authn/google/callback
```

---

## Okta OIDC

### Prerequisites

- Okta application created
- Client ID and Client Secret
- Okta domain URL

### Configuration

```yaml
heimdall:
  config:
    OIDC_NAME: "Okta"
    OIDC_ISSUER: "https://your-org.okta.com"
    OIDC_AUTHORIZATION_URL: "https://your-org.okta.com/oauth2/v1/authorize"
    OIDC_TOKEN_URL: "https://your-org.okta.com/oauth2/v1/token"
    OIDC_USER_INFO_URL: "https://your-org.okta.com/oauth2/v1/userinfo"
    OIDC_CLIENTID: "your-okta-client-id"

  secrets:
    OIDC_CLIENT_SECRET: "your-okta-client-secret"
```

**Callback URL:**
```
https://heimdall.example.com/authn/oidc_callback
```

::warning{title="Heimdall Naming Inconsistency"}
OIDC uses `OIDC_CLIENT_SECRET` (with underscore before SECRET), unlike other providers which use `*_CLIENTSECRET` (no underscore).
::

---

## Generic OIDC

Any OpenID Connect-compliant provider.

### Configuration

```yaml
heimdall:
  config:
    OIDC_NAME: "My SSO Provider"
    OIDC_ISSUER: "https://sso.example.com"
    OIDC_AUTHORIZATION_URL: "https://sso.example.com/oauth2/authorize"
    OIDC_TOKEN_URL: "https://sso.example.com/oauth2/token"
    OIDC_USER_INFO_URL: "https://sso.example.com/oauth2/userinfo"
    OIDC_CLIENTID: "heimdall"

  secrets:
    OIDC_CLIENT_SECRET: "your-oidc-client-secret"
```

**Callback URL:**
```
https://heimdall.example.com/authn/oidc_callback
```

---

## LDAP

Integrate with Active Directory or OpenLDAP.

### Configuration

```yaml
heimdall:
  config:
    LDAP_ENABLED: "true"
    LDAP_HOST: "ldap.example.com"
    LDAP_PORT: "636"  # 636 for LDAPS, 389 for LDAP
    LDAP_BINDDN: "cn=admin,dc=example,dc=com"
    LDAP_SEARCHBASE: "ou=users,dc=example,dc=com"
    LDAP_SEARCHFILTER: "(uid={{username}})"
```

**Secret:**
```bash
kubectl create secret generic heimdall-production-secrets \
  --from-literal=LDAP_PASSWORD="your-ldap-bind-password" \
  --dry-run=client -o yaml | kubectl apply -f -
```

### Active Directory

```yaml
heimdall:
  config:
    LDAP_ENABLED: "true"
    LDAP_HOST: "ad.example.com"
    LDAP_PORT: "636"
    LDAP_BINDDN: "CN=Heimdall Service,OU=Service Accounts,DC=example,DC=com"
    LDAP_SEARCHBASE: "OU=Users,DC=example,DC=com"
    LDAP_SEARCHFILTER: "(sAMAccountName={{username}})"
```

### Custom CA Certificate

If LDAP server uses custom CA:

```yaml
heimdall:
  config:
    LDAP_ENABLED: "true"
    LDAP_HOST: "ldap.internal.company.com"
    LDAP_PORT: "636"

# Enable custom CA certificates
certs:
  enabled: true
  caCerts: |
    -----BEGIN CERTIFICATE-----
    ... your CA certificate ...
    -----END CERTIFICATE-----
```

See [Custom CA Certificates](/configuration/custom-ca-certificates) for details.

---

## Multiple Authentication Methods

Enable multiple providers simultaneously:

```yaml
heimdall:
  config:
    # Local auth
    LOCAL_LOGIN_DISABLED: "false"

    # GitHub OAuth
    GITHUB_CLIENTID: "github-client-id"

    # GitLab OAuth
    GITLAB_CLIENTID: "gitlab-client-id"
    GITLAB_BASEURL: "https://gitlab.com"

    # Okta OIDC
    OIDC_NAME: "Okta"
    OIDC_ISSUER: "https://your-org.okta.com"
    OIDC_CLIENTID: "okta-client-id"

  secrets:
    GITHUB_CLIENTSECRET: "github-secret"
    GITLAB_SECRET: "gitlab-secret"
    OIDC_CLIENT_SECRET: "okta-secret"
```

::tip{title="OAuth Button Visibility"}
OAuth login buttons appear automatically when the corresponding `{PROVIDER}_CLIENTID` variable is set. No separate "enabled" flag needed.
::

---

## Disable Local Authentication

For SSO-only deployments:

```yaml
heimdall:
  config:
    LOCAL_LOGIN_DISABLED: "true"

    # At least one OAuth/OIDC provider must be configured
    GITHUB_CLIENTID: "your-github-client-id"

  secrets:
    GITHUB_CLIENTSECRET: "your-github-secret"
```

::warning{title="Ensure SSO is Working First"}
Test SSO authentication before disabling local login to avoid lockout.
::

---

## Troubleshooting

### OAuth Redirect URL Mismatch

**Error:** `redirect_uri_mismatch`

**Cause:** Callback URL in OAuth provider doesn't match

**Fix:** Ensure callback URL exactly matches:
```
https://heimdall.example.com/authn/{provider}/callback
```

Replace `{provider}` with: `github`, `gitlab`, `google`, `oidc`

### OAuth Button Not Appearing

**Symptom:** OAuth login button doesn't appear on login page

**Cause:** Client ID variable name incorrect

**Fix:** Use exact variable names from source code:
- ✅ `GITHUB_CLIENTID` (works)
- ❌ `GITHUB_CLIENTID` (won't work - two underscores)
- ❌ `GITHUBCLIENTID` (won't work - no underscore)

See [Environment Variables](/configuration/environment-variables) for complete reference.

### LDAP Connection Timeout

**Error:** `LDAP connection timeout`

**Cause:** Network connectivity or firewall blocking LDAP port

**Fix:**
```bash
# Test LDAP connectivity from pod
kubectl exec -n heimdall heimdall-0 -- nc -zv ldap.example.com 636
```

### OIDC Discovery Failed

**Error:** `Failed to discover OIDC configuration`

**Cause:** OIDC issuer URL incorrect or `.well-known/openid-configuration` not accessible

**Fix:** Verify issuer URL returns OIDC discovery document:
```bash
curl https://your-org.okta.com/.well-known/openid-configuration
```

### Custom CA Not Trusted

**Error:** `SSL certificate problem: unable to get local issuer certificate`

**Cause:** Custom CA certificate not configured

**Fix:** Add custom CA certificate - see [Custom CA Certificates](/configuration/custom-ca-certificates)

---

## See Also

- [Common Scenarios](/getting-started/common-scenarios) - Copy-paste configs
- [Environment Variables](/configuration/environment-variables) - All config options
- [Custom CA Certificates](/configuration/custom-ca-certificates) - Trust internal CAs
- [Secrets Management](/getting-started/secrets) - Secure credential storage
